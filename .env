# ================================================================================================
# FACIAL ATTENDANCE SYSTEM - LOCAL DEVELOPMENT CONFIGURATION
# ================================================================================================

# ===== DATABASE CONFIGURATION =====
# DATABASE_TYPE: "postgresql" or "sqlite" (choose one)
DATABASE_TYPE=sqlite

# PostgreSQL Configuration (used when DATABASE_TYPE=postgresql)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=dental_attendance
POSTGRES_USER=dental_user
POSTGRES_PASSWORD=root

# SQLite Configuration (used when DATABASE_TYPE=sqlite)
# DB_FILE=attendance.db  # Uncomment to customize SQLite file location

# Redis Configuration (Local)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_CACHE_EXPIRATION_SECONDS=300

# Photo Storage Configuration
PHOTO_STORAGE_TYPE=local
PHOTO_STORAGE_PATH=./backend/static
BACKEND_BASE_URL=http://localhost:8000

# ======================= FACE ANALYSIS CONFIGURATION =======================
# ┌─────────────────┬──────────────┬────────────┬──────────────────────────────┬──────────────────────────┬──────────────────────────┬──────────────┐
# │ Component       │ Model        │ Accuracy     │ Speed      │ Best For                     │ Faces / Photo            │ Threshold    │
# ├─────────────────┼──────────────┼────────────┼────────────┼──────────────────────────────┼──────────────────────────┼──────────────┤
# │ Detection       │ RetinaFace   │ ⭐⭐⭐⭐⭐    │ Moderate   │ Highest detection accuracy    │ 100+ (excellent)         │ —            │
# │ Detection       │ MTCNN        │ ⭐⭐⭐⭐½    │ Moderate   │ Best overall (default)        │ 50–80 (very reliable)    │ —            │
# │ Detection       │ MediaPipe    │ ⭐⭐⭐⭐     │ Fast       │ Real-time applications        │ 30–50 (good)             │ —            │
# │ Detection       │ SSD          │ ⭐⭐⭐½     │ Fast       │ General-purpose detection     │ 20–40 (fair)             │ —            │
# │ Detection       │ Dlib         │ ⭐⭐⭐      │ Moderate   │ Simple / legacy systems       │ 10–20 (limited)          │ —            │
# │ Detection       │ OpenCV Haar  │ ⭐⭐       │ Very Fast  │ Low-resource setups           │ 5–10 (poor)              │ —            │
# ├─────────────────┼──────────────┼────────────┼────────────┼──────────────────────────────┼──────────────────────────┼──────────────┤
# │ Recognition     │ Facenet512   │ ⭐⭐⭐⭐⭐    │ Fast       │ Group photos (default)        │ —                        │ 20.0         │
# │ Recognition     │ ArcFace      │ ⭐⭐⭐⭐⭐    │ Moderate   │ Highest accuracy              │ —                        │ 18.0         │
# │ Recognition     │ GhostFaceNet │ ⭐⭐⭐⭐     │ Very Fast  │ Real-time processing          │ —                        │ 19.0         │
# │ Recognition     │ Facenet      │ ⭐⭐⭐      │ Very Fast  │ Basic recognition             │ —                        │ 15.0         │
# │ Recognition     │ SFace        │ ⭐⭐⭐      │ Fast       │ Lightweight systems           │ —                        │ 12.0         │
# └─────────────────┴──────────────┴────────────┴────────────┴──────────────────────────────┴──────────────────────────┴──────────────┘

FACE_RECOGNITION_MODEL=Facenet512

# Model-Specific Recommended Thresholds:
#   Facenet512: 20.0 | ArcFace: 18.0 | GhostFaceNet: 19.0 | Facenet: 15.0 | SFace: 12.0
FACE_DISTANCE_THRESHOLD=22.0

# Available Detectors: mtcnn (best), retinaface (most accurate), mediapipe (fast), opencv (fastest), ssd, dlib
FACE_DETECTOR_BACKEND=mtcnn

# ===== ADAPTIVE THRESHOLD MODE =====
# When enabled, the system automatically adjusts thresholds based on:
#   - Number of faces in photo (group size)
#   - Face quality score (sharpness, size, lighting)
# Single photo (1-2 faces): uses base threshold (strict)
# Small group (3-10 faces): adds THRESHOLD_SMALL_GROUP_OFFSET (moderate)
# Large group (11+ faces): adds THRESHOLD_LARGE_GROUP_OFFSET (relaxed)
ADAPTIVE_THRESHOLD_MODE=disabled
THRESHOLD_SMALL_GROUP_OFFSET=4.0
THRESHOLD_LARGE_GROUP_OFFSET=8.0

# ===== CORE RECOGNITION SETTINGS =====
# Minimum confidence (0.0-1.0) to accept a match. Higher = stricter, fewer false positives
MIN_CONFIDENCE_THRESHOLD=0.20

# Minimum face size in pixels. Faces smaller than this are rejected
MIN_FACE_SIZE=30

# Minimum face quality score (0.0-1.0). Based on sharpness, size, brightness, contrast
MIN_FACE_QUALITY_SCORE=0.2

# Ambiguity margin: rejects match if best vs second-best are too close
AMBIGUITY_MARGIN=3.0

# ===== PREPROCESSING & DETECTION =====
# Enhanced preprocessing: histogram equalization, sharpening, denoising
ENHANCED_PREPROCESSING=true

# Multi-detector cascade: falls back through detectors if first fails
ENABLE_MULTI_DETECTOR=true
DETECTOR_FALLBACK_SEQUENCE=mtcnn,retinaface,mediapipe,opencv

# Face quality assessment: filters low-quality faces
ENABLE_QUALITY_ASSESSMENT=true

# Performance Configuration
COMPUTE_MODE=auto
TF_FORCE_GPU_ALLOW_GROWTH=true
CUDA_VISIBLE_DEVICES=0
ENABLE_ASYNC_PROCESSING=true
BATCH_SIZE=32
MAX_WORKERS=4

# Feature Flags
LOAD_BALANCER_ENABLED=false
MONITORING_ENABLED=true
PREDICTIVE_ANALYTICS_ENABLED=false

# Logging Configuration
LOG_LEVEL=INFO
LOG_THROTTLE_MS=1000

# Frontend Configuration
REACT_APP_API_BASE=http://localhost:8000
REACT_APP_PHOTO_BASE=http://localhost:8000

# Authentication Configuration
AUTH_SECRET_KEY=your-secret-key-change-this-in-production-$(date +%s)
ACCESS_TOKEN_EXPIRE_MINUTES=480
